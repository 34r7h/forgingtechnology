<div
        class="grid"
        ng-style="{display:'flex', flexFlow:'row wrap', justifyContent:'space-between'}">
    <uploader></uploader>
    <div
            ng-style="{flex:'1 1 auto', display:'flex', flexDirection:'column', maxWidth:'320px'}"
            ng-repeat="(key, val) in admin.d.array.media">
        <h3>{{admin.d.object.media[val.$id].name}}</h3>
        <b type="button" ng-click="$parent.admin.a.save('media', val.$id, val)">SAVE</b>
        <!-- TODO make next and prev feature for image viewing -->
        <div>
            <label ng-init="!admin.d.object.media[val.$id].text ? admin.d.object.media[val.$id].text = '' : null">
                <textarea ng-model="val.text" placeholder="No Description Set"></textarea>
            </label>
            <img
                    ng-style="{width:'100%', background:thumb.data.data + ' no-repeat center center/cover'}"
                    ng-click="
                        admin.s.full.thumb = thumb.data.data;
                        admin.s.full.src = admin.d.object.media[val.$id].src || val.src;
                        admin.s.full.prev = {thumb: admin.a.get('https://sizzling-fire-2548.firebaseio.com/media/'+ $parent.admin.d.array[$parent.admin.s.type][$index-1].name.replace('.','`')), src:$parent.admin.d.array['media'][$index-1].src};
                        admin.s.full.next = {thumb: admin.a.get('https://sizzling-fire-2548.firebaseio.com/media/'+ $parent.admin.d.array['media'][$index+1].name.replace('.','`')), src:$parent.admin.d.array['media'][$index+1].src};"
                    ng-show="thumb"
                    ng-init="!thumb ? thumb = admin.a.get('https://sizzling-fire-2548.firebaseio.com/media/'+ ( admin.d.object.media[val.$id].name.replace('.','`') || val.name.replace('.','`') ) + '.json' ): null"
                    ng-src="{{thumb.data.data}}" alt="">
            <i type="button" ng-click="$parent.admin.a.rm('media', val.$id)">remove</i>
            <hr>
            <div ng-if="admin.s.full"
                 ng-style="{display:'flex', justifyContent:'center', position:'fixed', top:0, bottom:0, left:0, right:0, background:'white', textAlign:'center'}">
                <div ng-style="{margin:'0 auto'}">
                    <img ng-style="{position:'fixed', height:'100vh', width:'auto'}"
                         ng-src="{{$parent.admin.s.full.src}}" alt=""
                         ng-click="$parent.admin.s.full = false">
                    <img ng-style="{margin:'0 auto', height:'100vh', width:'auto'}"
                         ng-src="{{$parent.admin.s.full.thumb}}" alt=""
                         ng-click="$parent.admin.s.full = false">
                </div>
            </div>
        </div>
    </div>
</div>